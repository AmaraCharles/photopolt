<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhotoPolitic Email Sender</title>
  <style>
    body {
      margin: 0;
      background: #f4f6fa;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    header {
      width: 100%;
      background: #101010;
      color: white;
      text-align: center;
      padding: 20px 0;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
      letter-spacing: 0.5px;
    }
    .container {
      width: 100%;
      max-width: 900px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .form-section,
    .preview-section {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      flex: 1 1 400px;
    }
    .form-section h2 {
      margin-top: 0;
      color: #101010;
    }
    label {
      display: block;
      font-weight: 600;
      margin-top: 10px;
      margin-bottom: 5px;
    }
    input,
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-family: inherit;
      font-size: 14px;
    }
    textarea {
      resize: vertical;
      height: 100px;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 12px;
      background: #101010;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #333;
    }
    #status {
      margin-top: 10px;
      font-size: 14px;
      color: #555;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üìß PhotoPolitic Broadcast Sender</h1>
  </header>

  <div class="container">
    <div class="form-section">
      <h2>Send Email</h2>
      <label>API Key</label>
      <input type="text" id="apiKey" placeholder="Enter Resend API Key" />

      <label>Recipient Name</label>
      <input type="text" id="nameInput" placeholder="e.g. Felicity" />

      <label>Recipient Email</label>
      <input type="email" id="emailInput" placeholder="e.g. felicity@example.com" />

      <label>Email Subject</label>
      <input type="text" id="subjectInput" placeholder="e.g. We've received your message" />

      <label>Message</label>
      <textarea id="messageInput" placeholder="Enter message body here..."></textarea>

      <button id="sendBtn">Send Email</button>
      <div id="status"></div>
    </div>

    <div class="preview-section">
      <h2>Email Preview</h2>
      <iframe id="emailPreview"></iframe>
    </div>
  </div>

  <script>
    const nameInput = document.getElementById("nameInput");
    const emailInput = document.getElementById("emailInput");
    const subjectInput = document.getElementById("subjectInput");
    const messageInput = document.getElementById("messageInput");
    const apiInput = document.getElementById("apiKey");
    const emailPreview = document.getElementById("emailPreview");
    const statusEl = document.getElementById("status");

    // Generate PhotoPolitic-style HTML
    function generateHTML(name, message) {
      return `
        <div style="background:#e8edf3; padding:40px 0; font-family:Arial, sans-serif;">
            <div style="display:flex;flex-direction:row;justify-content:center;align-items:center;">
             <div style="width:150px; height:100px; margin-bottom:10px;">
  <!-- SVG pasted here -->

  <?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080 1080" width="150" height="150">
  <!-- Transparent white logo -->
  <path d="M0 0 C0 61.38 0 122.76 0 186 C-9.9 186 -19.8 186 -30 186 C-30 161.91 -30 137.82 -30 113 C-46.10880032 113.15742163 -46.10880032 113.15742163 -62.21704102 113.36035156 C-84.10507032 113.54458976 -102.702925 109.91088839 -119 94 C-130.74963586 80.2735823 -134.04465363 64.82271735 -133.19970703 47.24853516 C-132.74449077 42.12317844 -131.14823513 37.63566528 -129 33 C-128.649375 32.21625 -128.29875 31.4325 -127.9375 30.625 C-121.27702163 17.30404326 -109.78801407 8.70919154 -96.34765625 3.04296875 C-65.67013293 -6.5146727 -32.13189921 0 0 0 Z" fill="#000" transform="translate(430,354)"/>
  <path d="M0 0 C100.40104167 0 100.40104167 0 117.81640625 16.71875 C129.04056524 28.4448839 133.57042163 41.88528972 133.3125 57.95703125 C132.46196151 72.51895898 126.89938566 87.04667313 116 97 C101.42727623 108.72540732 85.84965918 113.38573465 67.20703125 113.1953125 C66.25485718 113.19329834 65.30268311 113.19128418 64.32165527 113.18920898 C60.81855339 113.17886999 57.31552103 113.15094915 53.8125 113.125 C42.0253125 113.063125 42.0253125 113.063125 30 113 C30 137.09 30 161.18 30 186 C20.1 186 10.2 186 0 186 C0 124.62 0 63.24 0 0 Z" fill="#000" transform="translate(439,354)"/>
  <path d="M0 0 C7.858125 -0.0825 15.71625 -0.165 23.8125 -0.25 C26.27050049 -0.28641602 28.72850098 -0.32283203 31.26098633 -0.36035156 C33.24299246 -0.37205088 35.22500832 -0.38223974 37.20703125 -0.390625 C38.20875366 -0.41108887 39.21047607 -0.43155273 40.24255371 -0.45263672 C49.86634705 -0.45731926 59.95107674 2.03918828 67 9 C73.97561589 17.57419453 76.08213204 26.04170084 75 37 C73.14765548 45.34109628 69.29580126 52.62719882 61.9453125 57.30859375 C59.98784218 58.31687563 58.04648727 59.18943053 56 60 C55.24217728 60.34159149 54.48435455 60.68318298 53.7035675 61.03512573 C50.84886446 62.05393865 48.7687496 62.24202853 45.75073242 62.22705078 C44.71589722 62.22680908 43.68106201 62.22656738 42.61486816 62.22631836 C41.53926636 62.21608643 40.46366455 62.20585449 39.35546875 62.1953125 C38.35793579 62.19329834 37.36040283 62.19128418 36.3326416 62.18920898 C32.61754742 62.17876976 28.90251894 62.15084719 25.1875 62.125 C16.875625 62.08375 8.56375 62.0425 0 62 C0 41.54 0 21.08 0 0 Z" fill="#e8edf3" transform="translate(469,378)"/>
  <path d="M0 0 C7.486875 0.0825 14.97375 0.165 22.6875 0.25 C22.6875 20.71 22.6875 41.17 22.6875 62.25 C14.623125 62.311875 6.55875 62.37375 -1.75 62.4375 C-4.27841553 62.46481201 -6.80683105 62.49212402 -9.41186523 62.52026367 C-11.43993656 62.52903431 -13.46801322 62.53667688 -15.49609375 62.54296875 C-16.52963989 62.55831665 -17.56318604 62.57366455 -18.62805176 62.58947754 C-28.30908746 62.59293876 -36.78425333 60.6833993 -43.90625 53.68359375 C-51.6725693 45.17490569 -52.0310864 37.07464372 -51.71484375 26.0234375 C-51.36525579 20.37557714 -50.16977979 16.47031789 -46.3125 12.25 C-45.69246094 11.53714844 -45.07242187 10.82429688 -44.43359375 10.08984375 C-32.41318589 -2.10766035 -15.78057625 -0.24606963 0 0 Z" fill="#e8edf3" transform="translate(377.3125,377.75)"/>
</svg>

</div>


               </div>
          <div style="max-width:600px; margin:auto; background:#0f0f0f; color:#000; border-radius:6px; overflow:hidden;">
            
            <div style="text-align:center; padding:30px 0;">
            
              
            </div>
            <div style="background:#181818; padding:30px; line-height:1.6;">
              <p style="font-size:16px;">Hello <b>${name}</b>,</p>
              <p style="color:#d1d1d1; font-size:15px;">${message}</p>
              <p style="margin-top:20px; font-size:13px; color:#aaa;">Best regards,<br><strong>PhotoPolitic Team</strong></p>
            </div>
            <div style="background:#e8edf3; text-align:center; padding:20px;">
              <a href="#" style="margin:0 5px;"><img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" width="20"></a>
              <a href="#" style="margin:0 5px;"><img src="https://cdn-icons-png.flaticon.com/512/145/145807.png" width="20"></a>
              <a href="#" style="margin:0 5px;"><img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" width="20"></a>
              <p style="margin-top:10px; font-size:12px; color:#444;">¬©2025 PhotoPolitic. All rights reserved.</p>
            </div>
          </div>
        </div>
      `;
    }

    // Initialize live preview
    function updatePreview() {
      emailPreview.srcdoc = generateHTML(nameInput.value || "Recipient", messageInput.value || " ");
    }
    updatePreview();

    nameInput.addEventListener("input", updatePreview);
    messageInput.addEventListener("input", updatePreview);

    // Send email through your proxy (avoids CORS)
    document.getElementById("sendBtn").addEventListener("click", async () => {
      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const subject = subjectInput.value.trim();
      const message = messageInput.value.trim();
      const apiKey = apiInput.value.trim();

      if (!name || !email || !subject || !message || !apiKey) {
        statusEl.textContent = "‚ö†Ô∏è Please fill all fields.";
        return;
      }

      statusEl.textContent = "üì® Sending...";

      try {
        const res = await fetch("https://photo-server-zey9.onrender.com/transactions/send-email", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            from: "support@photopclitic.com",
            to: email,
            subject,
            html: generateHTML(name, message)
          })
        });

        if (res.ok) {
          statusEl.textContent = "‚úÖ Email sent successfully!";
        } else {
          const data = await res.json();
          statusEl.textContent = "‚ùå Error: " + JSON.stringify(data);
        }
      } catch (err) {
        statusEl.textContent = "‚ùå Error: " + err.message;
      }
    });
  </script>
</body>
</html>
